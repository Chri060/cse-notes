\section{Exercise 20}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.75\linewidth]{images/HL1.png}
\end{figure}
Given the resource hierarchy above, is the following schedule compatible with a 2PL strict scheduler that applies hierarchical locking?
\[r_1(a) w_1(s) w_2(t) r_2(a) w_1(a)\]

\subsection*{Solution}
the lock manager works as follows: 
\begin{table}[H]
    \centering
    \begin{tabular}{c|cccccc|c}
    \cline{2-7}
    \textit{}                          & \textit{X}               & \textit{a}              & \textit{B} & \textit{Y}               & \textit{s}          & \textit{t}          & \textit{}    \\ \cline{1-7}
    \multicolumn{1}{|c|}{$r_1(a)$}     & $\textnormal{ISM}_1$     & -                       & -          & -                        & -                   & -                   &              \\
    \multicolumn{1}{|c|}{}             & $\textnormal{ISM}_1$     & $\textnormal{SL}_1$     & -          & -                        & -                   & -                   &              \\
    \multicolumn{1}{|c|}{$w_1(s)$}     & $\textnormal{ISM}_1$     & $\textnormal{SL}_1$     & -          & $\textnormal{IXL}_1$     & -                   & -                   &              \\
    \multicolumn{1}{|c|}{}             & $\textnormal{ISM}_1$     & $\textnormal{SL}_1$     & -          & $\textnormal{IXL}_1$     & $\textnormal{XL}_1$ & -                   &              \\
    \multicolumn{1}{|c|}{$w_2(t)$}     & $\textnormal{ISM}_1$     & $\textnormal{SL}_1$     & -          & $\textnormal{IXL}_{1,2}$ & $\textnormal{XL}_1$ & -                   &              \\
    \multicolumn{1}{|c|}{}             & $\textnormal{ISM}_1$     & $\textnormal{SL}_1$     & -          & $\textnormal{IXL}_{1,2}$ & $\textnormal{XL}_1$ & $\textnormal{XL}_2$ &              \\
    \multicolumn{1}{|c|}{$r_2(a)$}     & $\textnormal{ISM}_{1,2}$ & $\textnormal{SL}_1$     & -          & $\textnormal{IXL}_{1,2}$ & $\textnormal{XL}_1$ & $\textnormal{XL}_2$ &              \\
    \multicolumn{1}{|c|}{}             & $\textnormal{ISM}_{1,2}$ & $\textnormal{SL}_{1,2}$ & -          & $\textnormal{IXL}_{1,2}$ & $\textnormal{XL}_1$ & $\textnormal{XL}_2$ &              \\
    \multicolumn{1}{|c|}{commit $t_2$} &                          &                         &            &                          &                     &                     & End of $t_2$ \\
    \multicolumn{1}{|c|}{}             & $\textbf{ISM}_1$         & $\textnormal{SL}_1$     & -          & $\textnormal{IXL}_1$     & $\textnormal{XL}_1$ & -                   &              \\
    \multicolumn{1}{|c|}{$w_1(a)$}     & $\textbf{IXL}_1$         & $\textbf{SL}_1$         & -          & $\textnormal{IXL}_1$     & $\textnormal{XL}_1$ & -                   &              \\
    \multicolumn{1}{|c|}{}             & $\textnormal{IXL}_1$     & $\textbf{XL}_1$         & -          & $\textnormal{IXL}_1$     & $\textnormal{XL}_1$ & -                   &              \\
    \multicolumn{1}{|c|}{commit $t_1$} &                          &                         &            &                          &                     &                     & End of $t_1$ \\ \cline{1-7}
    \end{tabular}
\end{table}
so, it is compatible with a strict 2PL scheduler. 