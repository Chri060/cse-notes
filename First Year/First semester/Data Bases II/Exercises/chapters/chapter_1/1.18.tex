\section{Exercise 18}

Given the schedule:
\[r1(x) r2(x) r3(y) w3(y) w1(x) w2(y)\]
show the sequence of lock and unlock requests produced by the transactions in a 2PL execution, in a system with update lock (available locks: $SL, UL, XL$).

\paragraph*{Solution}
The locking phases with update locks are the following: 
\begin{table}[H]
    \centering
    \begin{tabular}{|c|c|}
    \hline
    $X$                                           & $Y$                                           \\ \hline
    $\textnormal{UL}_1(x)$                        &                                               \\
    $r_1(x)$                                      &                                               \\
    $\textnormal{SL}_2(x)$                        &                                               \\
    $r_2(x)$                                      &                                               \\
                                                    & $\textnormal{UL}_3(y)$                        \\
                                                    & $r_3(y)$                                      \\
                                                    & $\textnormal{XL}_3(y) [\textnormal{upgrade}]$ \\
                                                    & $w_3(y)$                                      \\
                                                    & $\textnormal{rel}(\textnormal{XL}_3(y))$      \\
                                                    & $\textnormal{XL}_2(y)$                        \\
    $\textnormal{rel}(\textnormal{SL}_2(x))$      &                                               \\
    $\textnormal{XL}_1(x) [\textnormal{upgrade}]$ &                                               \\
    $w_1(x)$                                      &                                               \\
    $\textnormal{rel}(\textnormal{XL}_1(x))$      &                                               \\
                                                    & $w_2(y)$                                      \\
                                                    & $\textnormal{rel}(\textnormal{XL}_2(y))$      \\ \hline
    \end{tabular}
\end{table}