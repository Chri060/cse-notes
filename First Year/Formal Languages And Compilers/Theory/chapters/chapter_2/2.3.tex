\section{Erroneous grammars and useless rules}

When writing a grammar attention should be paid that all non-terminals are defined and that each one effectively contributes to the production of some sentence. 
In fact, some rules may turn out to be unproductive. 
\begin{definition}
    A grammar $G$ is called \emph{clean} (or reduced) under the following conditions:
    \begin{enumerate}
        \item Every non-terminal $A$ is reachable from the axiom.
        \item Every non-terminal $A$ is well-defined.
    \end{enumerate}
\end{definition}
It is often straightforward to check by inspection whether a grammar is clean. The following algorithm formalizes the checks. The algorithm operates in two phases, 
first pinpointing the undefined non-terminals, then the unreachable ones. Lastly the rules containing non-terminals of either type can be canceled. The phases are: 
\begin{enumerate}
    \item Compute the set $DEF\subseteq V$ of well-defined non-terminals. The set $DEF$ is initialized with the non-terminals of terminal rules, those having a 
        terminal string as right part:
        \[DEF:=\{A|( A \rightarrow u ) \in P,with u \in \Sigma^{*}\}\]
        Then the next transformation is applied until convergence is reached:
        \[DEF:=DEF \cup B|( B \rightarrow D_1D_2\dots D_n)\in P\]
        where every $D_i$ is a terminal or a non-terminal symbol present in $DEF$. At each iteration two outcomes are possible:
        \begin{itemize}
            \item A new non non-terminal is found having as right part a string of symbols that are well-defined non-terminals or terminals. 
            \item The termination condition is reached
        \end{itemize}
        The non-terminals belonging to the complement set $V-DEF$ are undefined and should be eliminated.
    \item A non-terminal is reachable from the axiom, if, and only if, there exists a path in the following graph, which represents a relation between non-terminals,
        called product:
        \[A \rightarrow^{produce} B\]
        saying that $A$ produces $B$ if, and only if, there exists a rule $A \rightarrow \alpha B \beta$, where $A,B$ are non-terminals and $\alpha,\beta$ are any strings.
        Clearly $C$ is reachable from $S$ if, and only if, in this graph there exists an oriented path from $S$ to $C$. The unreachable non-terminals are the complement
        with respect to $V$. They should be eliminated because they do not contribute to the generation of any sentence.
\end{enumerate}
Quite often the following requirement is added to the above clearness conditions: $G$ should not permit circular deviations $A \implies^{+} A$. This is done to avoid 
ambiguity. We observe that a grammar, although clean, may still contain redundant rules. 