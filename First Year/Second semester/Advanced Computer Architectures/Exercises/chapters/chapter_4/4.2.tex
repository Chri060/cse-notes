\section{Exercise 2}

Consider the following code:
\begin{verbnobox}[\verbarg]
LD F1, 0(R1)
FADD F2, F2, F3
ADDI R3, R3, 8
LD F4, 0(R2)
FADD F5, F4, F2
FMULT F6, F1, F4
ADDI R5, R5, 1
LD R6, 0(R4)
SD F6, 0(R5)
SD F5, 0(R6)
\end{verbnobox}
\begin{enumerate}
    \item Identify all conflicts.
    \item Develop a scoreboard for the given code, indicating clock cycles.
    \item If the previous table was incorrect, provide the accurate one, specifying the number, type, and latency for each unit.
\end{enumerate}

\subsection*{Solution}
\begin{enumerate}
    \item Conflicts:
        \begin{itemize}
        \item RAW F6 I1-I2.
        \item RAW F2 I2-I3.
        \item RAW F2 I2-I4.
        \item RAW F6 I1-I4.
        \item RAW F2 I2-I5.
        \item WAW F0 I3-I5.
        \item RAW F12 I4-I5.
        \end{itemize}
    \item Scoreboard:
        \begin{table}[H]
            \centering
            \begin{tabular}{c|cccc}
            \textbf{Instruction}     & \textbf{Issue} & \textbf{Read} & \textbf{Execution} & \textbf{Write} \\ \hline
            \textit{LD F1, 0(R1)}    & 1              & 2             & 5                  & 6              \\
            \textit{FADD F2, F2, F3} & 2              & 3             & 7                  & 8              \\
            \textit{ADDI R3, R3, 8}  & 3              & 4             & 5                  & 6              \\
            \textit{LD F4, 0(R2)}    & 4              & 5             & 8                  & 9              \\
            \textit{FADD F5, F4, F2} & 9              & 6             & 14                 & 15             \\
            FMULT F6, F1, F4         & 8              & 10            & 14                 & 16             \\
            ADDI R5, R5, 1           & 5              & 8             & 9                  & 10             \\
            LD R6, 0(R4)             & 6              & 9             & 12                 & 13             \\
            SD F6, 0(R5)             & 9              & 11            & 14                 & 17             \\
            SD F5, 0(R6)             & 10             & 14            & 17                 & 18            
            \end{tabular}
        \end{table}
        The issue order is incorrect, rendering the scoreboard configuration inaccurate.
    \item Correct Scoreboard:
        \begin{table}[H]
            \centering
            \begin{tabular}{c|cccc|cc}
            \textbf{Instruction}     & \textbf{Issue} & \textbf{Read} & \textbf{Execution} & \textbf{Write} & \textbf{Hazards}               & \textbf{Unit} \\ \hline
            \textit{LD F1, 0(R1)}    & 1              & 2             & 5                  & 6              &                                & MU1           \\
            \textit{FADD F2, F2, F3} & 2              & 3             & 7                  & 8              &                                & FDU1          \\
            \textit{ADDI R3, R3, 8}  & 3              & 4             & 5                  & 7              & Struct RF                      & ALU1          \\
            \textit{LD F4, 0(R2)}    & 4              & 5             & 8                  & 9              &                                & MU2           \\
            \textit{FADD F5, F4, F2} & 5              & 10            & 14                 & 15             & \makecell{RAW F2 \\ RAW F4}    & FPU2          \\
            FMULT F6, F1, F4         & 6              & 10            & 14                 & 16             & \makecell{RAW F4 \\ Struct RF} & FPU3          \\
            ADDI R5, R5, 1           & 7              & 8             & 9                  & 10             &                                & ALU2          \\
            LD R6, 0(R4)             & 8              & 9             & 12                 & 13             &                                & MU3           \\
            SD F6, 0(R5)             & 9              & 17            & 20                 & 21             & \makecell{RAW F5 \\ RAW F6}    & MU1           \\
            SD F5, 0(R6)             & 10             & 16            & 19                 & 20             & \makecell{RAW F6 \\ RAW F5}    & MU2          
            \end{tabular}
        \end{table}
\end{enumerate}